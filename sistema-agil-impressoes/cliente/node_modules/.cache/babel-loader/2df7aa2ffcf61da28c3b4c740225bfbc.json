{"ast":null,"code":"import { CARRINHO_VAZIO, PEDIDO_CRIA_FALHA, PEDIDO_CRIA_REQUEST, PEDIDO_CRIA_SUCESSO } from \"../constantes/constantesPedido\";\nimport api from '../utils/services/api';\nexport const criarPedido = pedido => async (dispatch, getState) => {\n  dispatch({\n    type: PEDIDO_CRIA_REQUEST,\n    payload: pedido\n  });\n\n  try {\n    //const {entrarConta} = getState();\n    //const {infoUsuario} = entrarConta;\n    const {\n      entrarConta: {\n        infoUsuario\n      }\n    } = getState();\n    console.log(infoUsuario.token);\n    const {\n      data\n    } = await api.post('/api/pedidos', pedido, {\n      headers: {\n        Authorization: `Bearer ${infoUsuario.token}`\n      }\n    });\n    dispatch({\n      type: PEDIDO_CRIA_SUCESSO,\n      payload: data.pedido\n    });\n    dispatch({\n      type: CARRINHO_VAZIO\n    });\n    localStorage.removeItem('itensCarrinho');\n  } catch (error) {\n    dispatch({\n      type: PEDIDO_CRIA_FALHA,\n      payload: error.message && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/actions/pedidoAction.js"],"names":["CARRINHO_VAZIO","PEDIDO_CRIA_FALHA","PEDIDO_CRIA_REQUEST","PEDIDO_CRIA_SUCESSO","api","criarPedido","pedido","dispatch","getState","type","payload","entrarConta","infoUsuario","console","log","token","data","post","headers","Authorization","localStorage","removeItem","error","message","response"],"mappings":"AACA,SAASA,cAAT,EAAyBC,iBAAzB,EAA4CC,mBAA5C,EAAiEC,mBAAjE,QAA4F,gCAA5F;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,OAAO,MAAMC,WAAW,GAAIC,MAAD,IAAY,OAAOC,QAAP,EAAiBC,QAAjB,KAA6B;AAChED,EAAAA,QAAQ,CAAC;AAACE,IAAAA,IAAI,EAACP,mBAAN;AAA2BQ,IAAAA,OAAO,EAAEJ;AAApC,GAAD,CAAR;;AAEA,MAAI;AAEA;AACA;AACA,UAAM;AACFK,MAAAA,WAAW,EAAE;AAAEC,QAAAA;AAAF;AADX,QAEAJ,QAAQ,EAFd;AAIAK,IAAAA,OAAO,CAACC,GAAR,CAAYF,WAAW,CAACG,KAAxB;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMZ,GAAG,CAACa,IAAJ,CAAS,cAAT,EAAyBX,MAAzB,EAAiC;AACpDY,MAAAA,OAAO,EAAC;AACJC,QAAAA,aAAa,EAAG,UAASP,WAAW,CAACG,KAAM;AADvC;AAD4C,KAAjC,CAAvB;AAMAR,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAEN,mBAAP;AAA4BO,MAAAA,OAAO,EAAEM,IAAI,CAACV;AAA1C,KAAD,CAAR;AACAC,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAET;AAAP,KAAD,CAAR;AACAoB,IAAAA,YAAY,CAACC,UAAb,CAAwB,eAAxB;AAEH,GAnBD,CAmBC,OAAMC,KAAN,EAAY;AACTf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAER,iBADD;AAELS,MAAAA,OAAO,EACLY,KAAK,CAACC,OAAN,IAAiBD,KAAK,CAACE,QAAN,CAAeR,IAAf,CAAoBO,OAArC,GACID,KAAK,CAACE,QAAN,CAAeR,IAAf,CAAoBO,OADxB,GAEID,KAAK,CAACC;AALP,KAAD,CAAR;AAOH;AACJ,CA/BM","sourcesContent":["\nimport { CARRINHO_VAZIO, PEDIDO_CRIA_FALHA, PEDIDO_CRIA_REQUEST, PEDIDO_CRIA_SUCESSO } from \"../constantes/constantesPedido\"\nimport api from '../utils/services/api';\n\nexport const criarPedido = (pedido) => async (dispatch, getState) =>{\n    dispatch({type:PEDIDO_CRIA_REQUEST, payload: pedido});\n\n    try {\n        \n        //const {entrarConta} = getState();\n        //const {infoUsuario} = entrarConta;\n        const {\n            entrarConta: { infoUsuario },\n          } = getState();\n\n        console.log(infoUsuario.token);\n        const { data } = await api.post('/api/pedidos', pedido, {\n            headers:{\n                Authorization: `Bearer ${infoUsuario.token}`,\n            },\n        });\n\n        dispatch({type: PEDIDO_CRIA_SUCESSO, payload: data.pedido});\n        dispatch({type: CARRINHO_VAZIO})\n        localStorage.removeItem('itensCarrinho');\n        \n    }catch(error){\n        dispatch({\n            type: PEDIDO_CRIA_FALHA,\n            payload:\n              error.message && error.response.data.message\n                ? error.response.data.message\n                : error.message,\n          });\n    }\n}"]},"metadata":{},"sourceType":"module"}