{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/paginas/TelaPedido.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { criarPedido, detalhesPedido } from '../actions/pedidoAction';\nimport LoadingBox from '../componentes/mensages/LoadingBox';\nimport MessageBox from '../componentes/mensages/MensageBox';\nimport PassoAPassoCompra from '../componentes/PassaAPassoCompra';\nimport { PEDIDO_CRIADO_RESET } from '../constantes/constantesPedido';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TelaPedido(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const enderecoEnvio = useSelector(state => state.endereco);\n  const carrinhoCompras = useSelector(state => state.carrinhoCompras);\n  const {\n    entrarConta\n  } = useSelector(state => state.entrarConta);\n  const {\n    infoUsuario\n  } = entrarConta;\n  const {\n    itensCarrinho\n  } = carrinhoCompras;\n  const pedidoCriado = useSelector(state => state.pedido);\n  const {\n    loading,\n    sucesso,\n    error,\n    pedido\n  } = pedidoCriado;\n\n  const paraPreco = num => Number(num.toFixed(2));\n\n  carrinhoCompras.precoItens = paraPreco(carrinhoCompras.itensCarrinho.reduce((a, c) => a + c.quantidade * c.preco, 0));\n  carrinhoCompras.taxaEnvio = carrinhoCompras.preco > 100 ? paraPreco(0) : paraPreco(10);\n  carrinhoCompras.precoImposto = Number(paraPreco(0.15 * carrinhoCompras.precoItens)).toFixed(2);\n  carrinhoCompras.precoTotal = Number(carrinhoCompras.precoItens + carrinhoCompras.precoEnvio + carrinhoCompras.precoImposto).toFixed(2);\n  carrinhoCompras.enderecoEntrega = enderecoEnvio;\n  carrinhoCompras.usuario = infoUsuario;\n  const dispatch = useDispatch();\n\n  const fazerPedidoHandler = () => {\n    dispatch(criarPedido({ ...carrinhoCompras,\n      itensPedido: carrinhoCompras.itensCarrinho\n    }));\n  };\n\n  useEffect(() => {\n    if (sucesso) {\n      navigate(`/detalhesPedido/${pedido._id}`);\n      dispatch({\n        type: PEDIDO_CRIADO_RESET\n      });\n    }\n  }, [dispatch, sucesso, pedido]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PassoAPassoCompra, {\n      passo1: true,\n      passo2: true,\n      passo3: true,\n      passo4: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Endere\\xE7o de Entrega\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Nome:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 41\n                }, this), \" \", enderecoEnvio.nomeCompleto, /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Endere\\xE7o:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 41\n                }, this), enderecoEnvio.cidade, \", \", enderecoEnvio.cep, \",\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 37\n              }, this), pedido.isEntregue ? /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"sucesso\",\n                children: [\"Delivered at \", pedido.dataEntrega]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"danger\",\n                children: \" Pedido Pendente\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Forma de Pagamento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Metodo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 41\n                }, this), \" \", carrinhoCompras.metodoPagamento]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 37\n              }, this), pedido.isPago ? /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"sucesso\",\n                children: [\"Pago at \", pedido.dataPagamento]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"danger\",\n                children: \" Pagamento Pendente\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Itens do Pedido\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: itensCarrinho.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.imagem,\n                        alt: item.nome,\n                        className: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 93,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 92,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"min-30\",\n                      children: /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/api/produtos/${item.produto}`,\n                        children: item.nome\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 97,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [item.quantidade, \" x $\", item.preco, \" = $\", item.quantidade * item.preco]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 29\n                  }, this)\n                }, item.produto, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Pedido\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Itens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", carrinhoCompras.precoItens]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Envio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", carrinhoCompras.precoEnvio]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Imposto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", carrinhoCompras.precoImposto]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Total Pedido\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"$\", carrinhoCompras.precoTotal]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"primary block\",\n                disabled: carrinhoCompras.itensCarrinho === 0,\n                onClick: fazerPedidoHandler,\n                children: \"Finalizar Compra\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this), loading && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 44\n            }, this), error && /*#__PURE__*/_jsxDEV(MessageBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TelaPedido, \"XJQMXJyK32Ufi99v+sLoMkyqMFA=\", false, function () {\n  return [useNavigate, useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = TelaPedido;\n\nvar _c;\n\n$RefreshReg$(_c, \"TelaPedido\");","map":{"version":3,"sources":["/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/paginas/TelaPedido.jsx"],"names":["React","useEffect","useDispatch","useSelector","Link","useNavigate","useParams","criarPedido","detalhesPedido","LoadingBox","MessageBox","PassoAPassoCompra","PEDIDO_CRIADO_RESET","TelaPedido","props","navigate","enderecoEnvio","state","endereco","carrinhoCompras","entrarConta","infoUsuario","itensCarrinho","pedidoCriado","pedido","loading","sucesso","error","paraPreco","num","Number","toFixed","precoItens","reduce","a","c","quantidade","preco","taxaEnvio","precoImposto","precoTotal","precoEnvio","enderecoEntrega","usuario","dispatch","fazerPedidoHandler","itensPedido","_id","type","nomeCompleto","cidade","cep","isEntregue","dataEntrega","metodoPagamento","isPago","dataPagamento","map","item","imagem","nome","produto"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { criarPedido, detalhesPedido } from '../actions/pedidoAction';\nimport LoadingBox from '../componentes/mensages/LoadingBox';\nimport MessageBox from '../componentes/mensages/MensageBox';\nimport PassoAPassoCompra from '../componentes/PassaAPassoCompra';\nimport { PEDIDO_CRIADO_RESET } from '../constantes/constantesPedido';\n\n\nexport default function TelaPedido(props) {\n    const navigate = useNavigate();  \n\n    const enderecoEnvio = useSelector((state) => state.endereco);\n    const carrinhoCompras = useSelector((state) => state.carrinhoCompras);\n    const {entrarConta} = useSelector((state) => state.entrarConta);\n    const {infoUsuario} = entrarConta;\n    const { itensCarrinho } = carrinhoCompras;\n\n    const pedidoCriado = useSelector((state) => state.pedido);\n    const {loading, sucesso, error, pedido} =  pedidoCriado;\n\n    const paraPreco = (num) => Number(num.toFixed(2));\n    carrinhoCompras.precoItens = paraPreco(\n        carrinhoCompras.itensCarrinho.reduce((a,c) => a + c.quantidade * c.preco, 0)\n        );\n    carrinhoCompras.taxaEnvio  = carrinhoCompras.preco > 100 ? paraPreco(0) : paraPreco(10);\n    carrinhoCompras.precoImposto = Number(paraPreco(0.15* carrinhoCompras.precoItens)).toFixed(2);\n    carrinhoCompras.precoTotal = Number(carrinhoCompras.precoItens + carrinhoCompras.precoEnvio + carrinhoCompras.precoImposto).toFixed(2);\n    carrinhoCompras.enderecoEntrega = enderecoEnvio;\n    carrinhoCompras.usuario=infoUsuario;\n\n    const dispatch = useDispatch();\n\n    const fazerPedidoHandler= () =>\n    {\n        \n        dispatch(criarPedido({...carrinhoCompras, itensPedido: carrinhoCompras.itensCarrinho}))\n    }\n\n    useEffect(()=>{\n        if(sucesso){\n            navigate(`/detalhesPedido/${pedido._id}`)\n            dispatch({type:PEDIDO_CRIADO_RESET});\n        }\n    },[dispatch, sucesso, pedido])\n    return (\n        <div>\n            <PassoAPassoCompra passo1 passo2 passo3 passo4></PassoAPassoCompra>\n            <div className=\"row top\">\n                \n                <div className=\"col-2\"> \n                        <ul>\n                            <li>\n                                <div className='card card-body'>\n                                    <h2>Endereço de Entrega</h2>\n                                    <p>\n                                        <strong>Nome:</strong> {enderecoEnvio.nomeCompleto}\n                                        <strong>Endereço:</strong> \n                                        {enderecoEnvio.cidade}, {enderecoEnvio.cep},\n                                        \n                                    </p>\n                                    {pedido.isEntregue ? (\n                                        <MessageBox variant=\"sucesso\">\n                                            Delivered at {pedido.dataEntrega}\n                                        </MessageBox>\n                                    ) : <MessageBox variant=\"danger\"> Pedido Pendente</MessageBox>}\n                                </div>\n                            </li>\n                            <li>\n                                <div className='card card-body'>\n                                    <h2>Forma de Pagamento</h2>\n                                    <p>\n                                        <strong>Metodo:</strong> {carrinhoCompras.metodoPagamento}\n                                </p>\n                                {pedido.isPago ? (\n                                        <MessageBox variant=\"sucesso\">\n                                            Pago at {pedido.dataPagamento}\n                                        </MessageBox>\n                                    ) : <MessageBox variant=\"danger\"> Pagamento Pendente</MessageBox>}\n                                </div>\n                            </li>\n                         \n                            <li>\n                                <div className='card card-body'>\n                                <strong>Itens do Pedido</strong>\n                                <ul>\n                        { itensCarrinho.map((item) => (\n                        <li key={item.produto}>\n                            <div className=\"row\">\n                            <div>\n                                <img src={item.imagem} alt={item.nome} className=\"small\" />\n                            </div>\n\n                            <div className=\"min-30\">\n                                <Link to={`/api/produtos/${item.produto}`}>\n                                {item.nome}\n                                </Link>\n                            </div>                  \n                            <div>{item.quantidade} x ${item.preco} = ${item.quantidade*item.preco}</div>              \n                            </div>\n                        </li>\n                        ))}\n                    </ul>\n                    </div>\n                    </li>\n                </ul>\n                </div>\n                <div className='col-1'>\n                    <div className='card card-body'>\n                        <ul>\n                            <li>\n                                <h2>\n                                    Pedido\n                                </h2>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div>Itens</div>\n                                    <div>${carrinhoCompras.precoItens}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div>Envio</div>\n                                    <div>${carrinhoCompras.precoEnvio}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div>Imposto</div>\n                                    <div>${carrinhoCompras.precoImposto}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div><strong>Total Pedido</strong></div>\n                                    <div><strong>${carrinhoCompras.precoTotal}</strong></div>\n                                </div>\n                            </li>\n                            <li>\n                                <button type=\"submit\" className='primary block' disabled={carrinhoCompras.itensCarrinho ===0} onClick={fazerPedidoHandler}>Finalizar Compra</button>\n                            </li>\n                            {\n                                loading && <LoadingBox></LoadingBox>\n                            }\n                            { error && <MessageBox></MessageBox>}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}