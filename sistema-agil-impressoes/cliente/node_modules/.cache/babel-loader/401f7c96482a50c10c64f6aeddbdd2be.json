{"ast":null,"code":"import { application } from \"express\";\nimport { CARRINHO_VAZIO, PEDIDO_CRIA_FALHA, PEDIDO_CRIA_REQUEST, PEDIDO_CRIA_SUCESSO } from \"../constantes/constantesPedido\";\nimport api from '../utils/services/api';\nexport const criarPedido = pedido => async (dispatch, getState) => {\n  dispatch({\n    type: PEDIDO_CRIA_REQUEST,\n    payload: pedido\n  });\n\n  try {\n    const {\n      entrarConta: {\n        usuarioInfo\n      }\n    } = getState();\n    const {\n      data\n    } = await api.post('/api/pedidos', pedido, {\n      headers: {\n        Authorization: `Bearer ${usuarioInfo.token}`\n      }\n    });\n    dispatch({\n      type: PEDIDO_CRIA_SUCESSO,\n      payload: data.pedido\n    });\n    dispatch({\n      type: CARRINHO_VAZIO\n    });\n    localStorage.removeItem('itensCarrinho');\n  } catch (error) {\n    dispatch({\n      type: PEDIDO_CRIA_FALHA,\n      payload: error.message && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/actions/pedidoAction.js"],"names":["application","CARRINHO_VAZIO","PEDIDO_CRIA_FALHA","PEDIDO_CRIA_REQUEST","PEDIDO_CRIA_SUCESSO","api","criarPedido","pedido","dispatch","getState","type","payload","entrarConta","usuarioInfo","data","post","headers","Authorization","token","localStorage","removeItem","error","message","response"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AACA,SAASC,cAAT,EAAyBC,iBAAzB,EAA4CC,mBAA5C,EAAiEC,mBAAjE,QAA4F,gCAA5F;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,OAAO,MAAMC,WAAW,GAAIC,MAAD,IAAY,OAAOC,QAAP,EAAiBC,QAAjB,KAA6B;AAChED,EAAAA,QAAQ,CAAC;AAACE,IAAAA,IAAI,EAACP,mBAAN;AAA2BQ,IAAAA,OAAO,EAAEJ;AAApC,GAAD,CAAR;;AAEA,MAAI;AACA,UAAM;AAACK,MAAAA,WAAW,EAAC;AAACC,QAAAA;AAAD;AAAb,QAA8BJ,QAAQ,EAA5C;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAW,MAAMT,GAAG,CAACU,IAAJ,CAAS,cAAT,EAAyBR,MAAzB,EAAiC;AACpDS,MAAAA,OAAO,EAAC;AACJC,QAAAA,aAAa,EAAG,UAASJ,WAAW,CAACK,KAAM;AADvC;AAD4C,KAAjC,CAAvB;AAMAV,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAEN,mBAAP;AAA4BO,MAAAA,OAAO,EAAEG,IAAI,CAACP;AAA1C,KAAD,CAAR;AACAC,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAET;AAAP,KAAD,CAAR;AACAkB,IAAAA,YAAY,CAACC,UAAb,CAAwB,eAAxB;AAEH,GAZD,CAYC,OAAMC,KAAN,EAAY;AACTb,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAER,iBADD;AAELS,MAAAA,OAAO,EACLU,KAAK,CAACC,OAAN,IAAiBD,KAAK,CAACE,QAAN,CAAeT,IAAf,CAAoBQ,OAArC,GACID,KAAK,CAACE,QAAN,CAAeT,IAAf,CAAoBQ,OADxB,GAEID,KAAK,CAACC;AALP,KAAD,CAAR;AAOH;AACJ,CAxBM","sourcesContent":["import { application } from \"express\";\nimport { CARRINHO_VAZIO, PEDIDO_CRIA_FALHA, PEDIDO_CRIA_REQUEST, PEDIDO_CRIA_SUCESSO } from \"../constantes/constantesPedido\"\nimport api from '../utils/services/api';\n\nexport const criarPedido = (pedido) => async (dispatch, getState) =>{\n    dispatch({type:PEDIDO_CRIA_REQUEST, payload: pedido});\n\n    try {\n        const {entrarConta:{usuarioInfo}} = getState();\n        const { data } = await api.post('/api/pedidos', pedido, {\n            headers:{\n                Authorization: `Bearer ${usuarioInfo.token}`,\n            },\n        });\n\n        dispatch({type: PEDIDO_CRIA_SUCESSO, payload: data.pedido});\n        dispatch({type: CARRINHO_VAZIO})\n        localStorage.removeItem('itensCarrinho');\n        \n    }catch(error){\n        dispatch({\n            type: PEDIDO_CRIA_FALHA,\n            payload:\n              error.message && error.response.data.message\n                ? error.response.data.message\n                : error.message,\n          });\n    }\n}"]},"metadata":{},"sourceType":"module"}