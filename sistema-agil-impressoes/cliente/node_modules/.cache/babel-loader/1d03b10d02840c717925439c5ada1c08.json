{"ast":null,"code":"import { CARRINHO_VAZIO, PEDIDO_CRIA_FALHA, PEDIDO_CRIA_REQUEST, PEDIDO_CRIA_SUCESSO } from \"../constantes/constantesPedido\";\nimport api from '../utils/services/api';\nexport const criarPedido = pedido => async (dispatch, getState) => {\n  dispatch({\n    type: PEDIDO_CRIA_REQUEST,\n    payload: pedido\n  });\n\n  try {\n    const {\n      entrarConta: {\n        infoUsuario\n      }\n    } = getState();\n    console.log(infoUsuario);\n    const {\n      data\n    } = await api.post('/api/pedidos', pedido, {\n      headers: {\n        Authorization: `Bearer ${infoUsuario.token}`\n      }\n    });\n    dispatch({\n      type: PEDIDO_CRIA_SUCESSO,\n      payload: data.pedido\n    });\n    dispatch({\n      type: CARRINHO_VAZIO\n    });\n    localStorage.removeItem('itensCarrinho');\n  } catch (error) {\n    dispatch({\n      type: PEDIDO_CRIA_FALHA,\n      payload: error.message && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/actions/pedidoAction.js"],"names":["CARRINHO_VAZIO","PEDIDO_CRIA_FALHA","PEDIDO_CRIA_REQUEST","PEDIDO_CRIA_SUCESSO","api","criarPedido","pedido","dispatch","getState","type","payload","entrarConta","infoUsuario","console","log","data","post","headers","Authorization","token","localStorage","removeItem","error","message","response"],"mappings":"AACA,SAASA,cAAT,EAAyBC,iBAAzB,EAA4CC,mBAA5C,EAAiEC,mBAAjE,QAA4F,gCAA5F;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,OAAO,MAAMC,WAAW,GAAIC,MAAD,IAAY,OAAOC,QAAP,EAAiBC,QAAjB,KAA6B;AAChED,EAAAA,QAAQ,CAAC;AAACE,IAAAA,IAAI,EAACP,mBAAN;AAA2BQ,IAAAA,OAAO,EAAEJ;AAApC,GAAD,CAAR;;AAEA,MAAI;AAEA,UAAM;AAACK,MAAAA,WAAW,EAAC;AAACC,QAAAA;AAAD;AAAb,QAA8BJ,QAAQ,EAA5C;AACIK,IAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;AACJ,UAAM;AAAEG,MAAAA;AAAF,QAAW,MAAMX,GAAG,CAACY,IAAJ,CAAS,cAAT,EAAyBV,MAAzB,EAAiC;AACpDW,MAAAA,OAAO,EAAC;AACJC,QAAAA,aAAa,EAAG,UAASN,WAAW,CAACO,KAAM;AADvC;AAD4C,KAAjC,CAAvB;AAMAZ,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAEN,mBAAP;AAA4BO,MAAAA,OAAO,EAAEK,IAAI,CAACT;AAA1C,KAAD,CAAR;AACAC,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAAET;AAAP,KAAD,CAAR;AACAoB,IAAAA,YAAY,CAACC,UAAb,CAAwB,eAAxB;AAEH,GAdD,CAcC,OAAMC,KAAN,EAAY;AACTf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAER,iBADD;AAELS,MAAAA,OAAO,EACLY,KAAK,CAACC,OAAN,IAAiBD,KAAK,CAACE,QAAN,CAAeT,IAAf,CAAoBQ,OAArC,GACID,KAAK,CAACE,QAAN,CAAeT,IAAf,CAAoBQ,OADxB,GAEID,KAAK,CAACC;AALP,KAAD,CAAR;AAOH;AACJ,CA1BM","sourcesContent":["\nimport { CARRINHO_VAZIO, PEDIDO_CRIA_FALHA, PEDIDO_CRIA_REQUEST, PEDIDO_CRIA_SUCESSO } from \"../constantes/constantesPedido\"\nimport api from '../utils/services/api';\n\nexport const criarPedido = (pedido) => async (dispatch, getState) =>{\n    dispatch({type:PEDIDO_CRIA_REQUEST, payload: pedido});\n\n    try {\n        \n        const {entrarConta:{infoUsuario}} = getState();\n            console.log(infoUsuario);\n        const { data } = await api.post('/api/pedidos', pedido, {\n            headers:{\n                Authorization: `Bearer ${infoUsuario.token}`,\n            },\n        });\n\n        dispatch({type: PEDIDO_CRIA_SUCESSO, payload: data.pedido});\n        dispatch({type: CARRINHO_VAZIO})\n        localStorage.removeItem('itensCarrinho');\n        \n    }catch(error){\n        dispatch({\n            type: PEDIDO_CRIA_FALHA,\n            payload:\n              error.message && error.response.data.message\n                ? error.response.data.message\n                : error.message,\n          });\n    }\n}"]},"metadata":{},"sourceType":"module"}