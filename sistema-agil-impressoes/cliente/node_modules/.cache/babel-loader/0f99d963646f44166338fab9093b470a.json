{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/paginas/TelaPedido.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { criarPedido } from '../actions/pedidoAction';\nimport LoadingBox from '../componentes/mensages/LoadingBox';\nimport MessageBox from '../componentes/mensages/MensageBox';\nimport PassoAPassoCompra from '../componentes/PassaAPassoCompra';\nimport { PEDIDO_CRIADO_RESET } from '../constantes/constantesPedido';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TelaPedido(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const enderecoEnvio = useSelector(state => state.endereco);\n  const carrinhoCompras = useSelector(state => state.carrinhoCompras);\n  const {\n    itensCarrinho\n  } = carrinhoCompras;\n\n  if (!carrinhoCompras.metodoPagamento) {\n    navigate(\"/pagamento\");\n  }\n\n  const pedidoCriado = useSelector(state => state.pedido);\n  const {\n    loading,\n    sucesso,\n    error,\n    pedido\n  } = pedidoCriado;\n\n  const paraPreco = num => Number(num.toFixed(2));\n\n  carrinhoCompras.precoItens = paraPreco(carrinhoCompras.itensCarrinho.reduce((a, c) => a + c.quantidade * c.preco, 0));\n  carrinhoCompras.precoEnvio = carrinhoCompras.preco > 100 ? paraPreco(0) : paraPreco(10);\n  carrinhoCompras.precoImposto = Number(paraPreco(0.15 * carrinhoCompras.precoItens)).toFixed(2);\n  carrinhoCompras.precoTotal = Number(carrinhoCompras.precoItens + carrinhoCompras.precoEnvio + carrinhoCompras.precoImposto).toFixed(2);\n  const dispatch = useDispatch();\n  console.log(enderecoEnvio);\n\n  const fazerPedidoHandler = () => {\n    dispatch(criarPedido({ ...carrinhoCompras,\n      itensPedido: carrinhoCompras.itensCarrinho\n    }));\n  };\n\n  useEffect(() => {\n    if (sucesso) {\n      navigate(`/detalhesPedido/${pedido._id}`);\n      dispatch({\n        type: PEDIDO_CRIADO_RESET\n      });\n    }\n  }, [dispatch, sucesso, pedido]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PassoAPassoCompra, {\n      passo1: true,\n      passo2: true,\n      passo3: true,\n      passo4: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Endere\\xE7o de Entrega\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Nome:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 41\n                }, this), \" \", enderecoEnvio.nomeCompleto, /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Endere\\xE7o:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 41\n                }, this), enderecoEnvio.cidade, \", \", enderecoEnvio.cep, \",\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Forma de Pagamento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Metodo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 41\n                }, this), \" \", carrinhoCompras.metodoPagamento]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Itens do Pedido\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: itensCarrinho.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.imagem,\n                        alt: item.nome,\n                        className: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 83,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 82,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"min-30\",\n                      children: /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/api/produtos/${item.produto}`,\n                        children: item.nome\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 87,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 86,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [item.quantidade, \" x $\", item.preco, \" = $\", item.quantidade * item.preco]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 91,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 29\n                  }, this)\n                }, item.produto, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Pedido\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Itens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", carrinhoCompras.precoItens]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Envio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", carrinhoCompras.precoEnvio]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Imposto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", carrinhoCompras.precoImposto]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Total Pedido\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"$\", carrinhoCompras.precoTotal]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"primary block\",\n                disabled: carrinhoCompras.itensCarrinho === 0,\n                onClick: fazerPedidoHandler,\n                children: \"Finalizar Compra\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this), loading && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 44\n            }, this), error && /*#__PURE__*/_jsxDEV(MessageBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TelaPedido, \"pNuZNWLkwhKf4mz1G/GgpjaADjQ=\", false, function () {\n  return [useNavigate, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = TelaPedido;\n\nvar _c;\n\n$RefreshReg$(_c, \"TelaPedido\");","map":{"version":3,"sources":["/home/oem/Documentos/projetos-react/sistema-agil-impressoes/cliente/src/paginas/TelaPedido.jsx"],"names":["React","useEffect","useDispatch","useSelector","Link","useNavigate","criarPedido","LoadingBox","MessageBox","PassoAPassoCompra","PEDIDO_CRIADO_RESET","TelaPedido","props","navigate","enderecoEnvio","state","endereco","carrinhoCompras","itensCarrinho","metodoPagamento","pedidoCriado","pedido","loading","sucesso","error","paraPreco","num","Number","toFixed","precoItens","reduce","a","c","quantidade","preco","precoEnvio","precoImposto","precoTotal","dispatch","console","log","fazerPedidoHandler","itensPedido","_id","type","nomeCompleto","cidade","cep","map","item","imagem","nome","produto"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { criarPedido } from '../actions/pedidoAction';\nimport LoadingBox from '../componentes/mensages/LoadingBox';\nimport MessageBox from '../componentes/mensages/MensageBox';\nimport PassoAPassoCompra from '../componentes/PassaAPassoCompra';\nimport { PEDIDO_CRIADO_RESET } from '../constantes/constantesPedido';\n\n\nexport default function TelaPedido(props) {\n    const navigate = useNavigate();\n    const enderecoEnvio = useSelector((state) => state.endereco);\n    const carrinhoCompras = useSelector((state) => state.carrinhoCompras);\n    const { itensCarrinho } = carrinhoCompras;\n\n    if(!carrinhoCompras.metodoPagamento){\n        navigate(\"/pagamento\")\n    }\n    const pedidoCriado = useSelector((state) => state.pedido);\n    const {loading, sucesso, error, pedido} =  pedidoCriado;\n\n    const paraPreco = (num) => Number(num.toFixed(2));\n    carrinhoCompras.precoItens = paraPreco(\n        carrinhoCompras.itensCarrinho.reduce((a,c) => a + c.quantidade * c.preco, 0)\n        );\n    carrinhoCompras.precoEnvio  = carrinhoCompras.preco > 100 ? paraPreco(0) : paraPreco(10);\n    carrinhoCompras.precoImposto = Number(paraPreco(0.15* carrinhoCompras.precoItens)).toFixed(2);\n    carrinhoCompras.precoTotal = Number(carrinhoCompras.precoItens + carrinhoCompras.precoEnvio + carrinhoCompras.precoImposto).toFixed(2);\n   \n    const dispatch = useDispatch();\n    \n    console.log(enderecoEnvio);\n    \n    const fazerPedidoHandler= () =>\n    {\n        \n        dispatch(criarPedido({...carrinhoCompras, itensPedido: carrinhoCompras.itensCarrinho}))\n    }\n\n    useEffect(()=>{\n        if(sucesso){\n            navigate(`/detalhesPedido/${pedido._id}`)\n            dispatch({type:PEDIDO_CRIADO_RESET});\n        }\n    },[dispatch, sucesso, pedido])\n    return (\n        <div>\n            <PassoAPassoCompra passo1 passo2 passo3 passo4></PassoAPassoCompra>\n            <div className=\"row top\">\n                \n                <div className=\"col-2\"> \n                        <ul>\n                            <li>\n                                <div className='card card-body'>\n                                    <h2>Endereço de Entrega</h2>\n                                    <p>\n                                        <strong>Nome:</strong> {enderecoEnvio.nomeCompleto}\n                                        <strong>Endereço:</strong> \n                                        {enderecoEnvio.cidade}, {enderecoEnvio.cep},\n                                        \n                                    </p>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='card card-body'>\n                                    <h2>Forma de Pagamento</h2>\n                                    <p>\n                                        <strong>Metodo:</strong> {carrinhoCompras.metodoPagamento}\n                                </p>\n                                </div>\n                            </li>\n                         \n                            <li>\n                                <div className='card card-body'>\n                                <strong>Itens do Pedido</strong>\n                                <ul>\n                        { itensCarrinho.map((item) => (\n                        <li key={item.produto}>\n                            <div className=\"row\">\n                            <div>\n                                <img src={item.imagem} alt={item.nome} className=\"small\" />\n                            </div>\n\n                            <div className=\"min-30\">\n                                <Link to={`/api/produtos/${item.produto}`}>\n                                {item.nome}\n                                </Link>\n                            </div>                  \n                            <div>{item.quantidade} x ${item.preco} = ${item.quantidade*item.preco}</div>              \n                            </div>\n                        </li>\n                        ))}\n                    </ul>\n                    </div>\n                    </li>\n                </ul>\n                </div>\n                <div className='col-1'>\n                    <div className='card card-body'>\n                        <ul>\n                            <li>\n                                <h2>\n                                    Pedido\n                                </h2>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div>Itens</div>\n                                    <div>${carrinhoCompras.precoItens}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div>Envio</div>\n                                    <div>${carrinhoCompras.precoEnvio}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div>Imposto</div>\n                                    <div>${carrinhoCompras.precoImposto}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className='row'>\n                                    <div><strong>Total Pedido</strong></div>\n                                    <div><strong>${carrinhoCompras.precoTotal}</strong></div>\n                                </div>\n                            </li>\n                            <li>\n                                <button type=\"submit\" className='primary block' disabled={carrinhoCompras.itensCarrinho ===0} onClick={fazerPedidoHandler}>Finalizar Compra</button>\n                            </li>\n                            {\n                                loading && <LoadingBox></LoadingBox>\n                            }\n                            { error && <MessageBox></MessageBox>}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}